import{r as t,C as w,j as e,I as R,m as v,a as _,L as k,u as U}from"./index-fktauDSl.js";import{A as T}from"./AnchorIcon-CaygIN_q.js";import{C as z}from"./Card-DwVod_KB.js";import{u as V}from"./fetchListings-7WVUmT41.js";const O=({allBoats:n})=>{const{boatResults:i,setBoatResults:r}=t.useContext(w),[j,N]=t.useState(null),[l,d]=t.useState(""),[c,p]=t.useState(""),[u,L]=t.useState(""),[x,C]=t.useState(""),[o,f]=t.useState(""),[A,M]=t.useState(""),[m,F]=t.useState(""),[D,E]=t.useState(""),[h,S]=t.useState(""),[g,y]=t.useState(""),P=s=>{if(s!==""){const a=parseFloat(s);return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(parseFloat(a))}else return""},Y=(s,a)=>{const I=s.target.value.replace(/[$,]/g,""),b=parseFloat(I);isNaN(b)?a==="min"?f(""):F(""):a==="min"?f(b):F(b)};t.useEffect(()=>{M(P(o))},[o]),t.useEffect(()=>{E(P(m))},[m]),t.useEffect(()=>{if(n&&n.length>0){r(n);const s=new Set(n.map(a=>a.BuilderName||a.MakeString));N([...s])}},[n,r]),t.useEffect(()=>{if([u,x,o,m,h,g].some(s=>s<0)&&alert("Values cannot be negative"),n){const s=n.filter(a=>(l===""||a.BuilderName===l||a.MakeString===l)&&(c===""||a.BoatCategoryCode===c)&&(u===""||a.ModelYear>=u)&&(x===""||a.ModelYear<=x)&&(m===""||parseFloat(a.Price)<=m)&&(o===""||parseFloat(a.Price)>=o)&&(h===""||parseFloat(a.NominalLength)>=h)&&(g===""||parseFloat(a.NominalLength)<=g));r(s)}},[l,u,x,c,o,m,h,g,n,r]);const B=()=>{d(""),p(""),L(""),C(""),f(""),M(""),F(""),S(""),y(""),r(n)};return e.jsxs("div",{className:"search-bar",children:[e.jsxs("div",{className:"filter-title",children:[e.jsx("div",{className:"textLLora ",children:"Filter your results "}),e.jsxs("div",{className:"textMRoboto reset",onClick:B,children:[e.jsx(R,{}),"Reset Filter"]})]}),e.jsxs("form",{action:"submit",className:"textMLora",children:[e.jsxs("div",{className:"filter-box ",children:[e.jsx("label",{htmlFor:"builder",children:"Builder"}),e.jsxs("select",{name:"builder",id:"builder",value:l,onChange:s=>d(s.target.value),children:[e.jsx("option",{value:"",children:"Any"}),j&&j.map((s,a)=>e.jsx("option",{value:s,children:s},a))]})]}),e.jsxs("div",{className:"filter-box",children:[e.jsx("label",{htmlFor:"class",children:"Class"}),e.jsxs("select",{name:"class",id:"class",value:c,onChange:s=>p(s.target.value),children:[e.jsx("option",{value:"",children:"Any"}),e.jsx("option",{value:"Power",children:"Power Boats"}),e.jsx("option",{value:"Sail",children:"Sail Boats"})]})]}),e.jsxs("div",{className:"filter-box",children:[e.jsx("label",{htmlFor:"minYear",children:"Year"}),e.jsxs("div",{className:"input-box",children:[e.jsx("input",{type:"number",id:"minYear",name:"minYear",max:new Date().getFullYear(),placeholder:"Min",value:u,onChange:s=>{const a=isNaN(parseFloat(s.target.value))?"":parseFloat(s.target.value);L(a)}}),e.jsx("input",{type:"number",name:"maxYear",min:1920,max:new Date().getFullYear(),placeholder:"Max",value:x,onChange:s=>{const a=isNaN(parseFloat(s.target.value))?"":parseFloat(s.target.value);C(a)}})]})]}),e.jsxs("div",{className:"filter-box",children:[e.jsx("label",{htmlFor:"minPrice",children:"Price (USD)"}),e.jsxs("div",{className:"input-box",children:[e.jsx("input",{type:"text",id:"minPrice",name:"minPrice",min:0,placeholder:"Min",value:A,onChange:s=>Y(s,"min")}),e.jsx("input",{type:"text",name:"maxPrice",min:0,max:5e7,placeholder:"Max",value:D,onChange:s=>Y(s,"max")})]})]}),e.jsxs("div",{className:"filter-box",children:[e.jsx("label",{htmlFor:"minLength",children:"Length (ft)"}),e.jsxs("div",{className:"input-box",children:[e.jsx("input",{type:"number",id:"minLength",name:"minLength",min:0,placeholder:"Min",value:h,onChange:s=>{const a=isNaN(parseFloat(s.target.value))?"":parseFloat(s.target.value);S(a)}}),e.jsx("input",{type:"number",name:"maxLength",min:0,placeholder:"Max",value:g,onChange:s=>{const a=isNaN(parseFloat(s.target.value))?"":parseFloat(s.target.value);y(a)}})]})]})]}),e.jsxs("div",{className:"textLLora",children:[e.jsx("span",{className:"results-count",children:i.length})," results"]})]})},J=()=>{const{boatResults:n}=t.useContext(w),i=U(),{isLoading:r,isError:j,error:N,isFetching:l,data:d}=V();return e.jsxs("main",{className:"listings",children:[e.jsx("header",{className:"listings__hero"}),e.jsx("div",{className:"wrapper",children:e.jsxs("section",{className:"listings__sale",children:[e.jsx("header",{className:"sale-header",children:e.jsxs(v.div,{className:"sale-title",...i,children:[e.jsx("h2",{className:"listings-bg-text",children:"Yachts for Sale"}),e.jsx("p",{children:"Browse our catalog of yachts for sale."}),e.jsx(T,{})]})}),j?e.jsx("div",{className:"textMLora",children:N}):d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"sale-filter",children:e.jsx(O,{allBoats:d})}),e.jsx("div",{className:"sale-listings",children:n&&n.length>0&&n.map((c,p)=>e.jsx(z,{item:c},p))})]}):e.jsx(_,{})]})}),e.jsx("article",{className:"listings__section",children:e.jsxs("div",{className:"wrapper sectionLayout",children:[e.jsxs("div",{className:"sectionContentLayout listings-section-content-container",children:[e.jsx(v.h2,{...i,children:"Find Your Dream Yacht Today"}),e.jsx(v.p,{...i,children:"Contact our brokers to get more information about the yachts available for sale."}),e.jsx(k,{to:"/contact",children:e.jsx(v.button,{...i,children:"Contact Us"})})]}),e.jsx("img",{src:"/listingsPage/listings2.webp",alt:"An image of a mid-sized boat on the blue ocean.",className:"imageCover",loading:"lazy"})]})})]})};export{J as default};
